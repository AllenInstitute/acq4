

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Modules &mdash; ACQ4 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="ACQ4 1.0 documentation" href="../../index.html" />
    <link rel="up" title="Developer’s Guide" href="../index.html" />
    <link rel="next" title="Manager Module" href="Manager.html" />
    <link rel="prev" title="Devices" href="../devices/index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Manager.html" title="Manager Module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../devices/index.html" title="Devices"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">ACQ4 1.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Developer&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="modules">
<h1>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h1>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="Manager.html">Manager Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataManager.html">Data Manager Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="Camera.html">Camera Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="Patch.html">Patch Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="ProtocolRunner.html">Protocol Runner Module</a></li>
</ul>
</div>
<div class="section" id="what-is-a-module">
<h2>What is a Module?<a class="headerlink" href="#what-is-a-module" title="Permalink to this headline">¶</a></h2>
<p>In short, a module is an almost-totally independent program which is launched by ACQ4 and has access to any of the services offered by ACQ4. Modules are free to do virtually anything they like&#8211;there are very few constraints on their code structure, behavior, appearance, etc. If the task you are trying to accomplish does not fit nicely into the existing modules, then it may be time to write a new one.</p>
</div>
<div class="section" id="how-to-build-a-new-module">
<h2>How to Build a New Module<a class="headerlink" href="#how-to-build-a-new-module" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Create a new python module under lib/modules. This can be a single file or a directory of files; it doesn&#8217;t matter.</p>
</li>
<li><p class="first">Create a subclass of lib.modules.Module.Module (I know, it&#8217;s an absurd name). This should look something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">lib.modules.Module</span> <span class="kn">import</span> <span class="n">Module</span>

<span class="k">class</span> <span class="nc">NewModuleClass</span><span class="p">(</span><span class="n">Module</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p class="first">Make your subclass importable as lib.modules.NewModuleClass.NewModuleClass. When loading your module, ACQ4 will issue the following statements to import your code and instantiate a new module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">lib.modules.NewModuleClass</span> <span class="kn">import</span> <span class="n">NewModuleClass</span>
<span class="n">newMod</span> <span class="o">=</span> <span class="n">NewModuleClass</span><span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>When ACQ4 instantiates your module, it will pass in three arguments:</p>
<ul class="simple">
<li>manager - a reference to the Manager that created the module. This object provides lots of useful services like getDevice(), getModule(), getCurrentDir(), and createTask().</li>
<li>name - the name assigned to this module. This helps to differentiate multiple instances of the same module class.</li>
<li>config - an arbitrary and optional configuration structure (usually a dict) which provides the module any other instantiation data it needs.</li>
</ul>
</li>
<li><p class="first">Define your class&#8217;s __init__ function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">NewModuleClass</span><span class="p">(</span><span class="n">Module</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">manager</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="n">Module</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">manager</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>  <span class="c">## call superclass __init__</span>
        <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p class="first">If your module creates a Qt window, give the module a window() method which returns a reference to the window. This allows ACQ4 to assign window keyboard shortcuts.</p>
</li>
<li><p class="first">Optional: create a quit() method. This will be called when ACQ4 is quitting, allowing the module to clean up if needed.</p>
</li>
<li><p class="first">Create a default configuration (or many) for loading your module. In the &#8216;modules&#8217; section of your configuration files, add a new section that looks like:</p>
<div class="highlight-python"><pre>ModuleName:
    module: 'NewModuleClass'
    config:
        ...  (data here will be passed to the config
        ...  argument when instantiating the class)</pre>
</div>
<p>Each section like this that you create adds a new entry to the main Manager window, allowing users to easily access the module.
By changing the contents of the &#8216;config&#8217; section, it is possible to allow multiple instances of the module to be loaded with different settings.</p>
</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Modules</a><ul>
<li><a class="reference internal" href="#what-is-a-module">What is a Module?</a></li>
<li><a class="reference internal" href="#how-to-build-a-new-module">How to Build a New Module</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../devices/index.html"
                        title="previous chapter">Devices</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Manager.html"
                        title="next chapter">Manager Module</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/devGuide/modules/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Manager.html" title="Manager Module"
             >next</a> |</li>
        <li class="right" >
          <a href="../devices/index.html" title="Devices"
             >previous</a> |</li>
        <li><a href="../../index.html">ACQ4 1.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Developer&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011; University of North Carolina at Chapel Hill.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>