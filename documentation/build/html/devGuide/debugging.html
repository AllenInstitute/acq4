

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Debugging &mdash; ACQ4 v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="ACQ4 v1.0 documentation" href="../index.html" />
    <link rel="up" title="Developer’s Guide" href="index.html" />
    <link rel="prev" title="Utility Libraries" href="utilityLibraries/index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="utilityLibraries/index.html" title="Utility Libraries"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">ACQ4 v1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Developer&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="debugging">
<h1>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h1>
<div class="section" id="python-debugging-and-ides">
<h2>Python debugging and IDEs<a class="headerlink" href="#python-debugging-and-ides" title="Permalink to this headline">¶</a></h2>
<p>We use Wing IDE Pro, many have also recommended Eric and Elipse + PyDev
All of these options offer a comprehensive set of debugging features.</p>
</div>
<div class="section" id="memory-leaks">
<h2>Memory Leaks<a class="headerlink" href="#memory-leaks" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>debug library has some tools for tracking down memory leaks:</dt>
<dd>ObjTracker
GarbageWatcher</dd>
</dl>
</div>
<div class="section" id="lockups-bus-errors-segmentation-faults">
<h2>Lockups, bus errors, segmentation faults<a class="headerlink" href="#lockups-bus-errors-segmentation-faults" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Things that crash PyQt4:</dt>
<dd><ul class="first simple">
<li>Model/View anything. TableView, TreeView, etc. They are too hard to program correctly, and any mistakes lead to untraceable crashing.</li>
<li>Changing the bounds of graphicsitems without calling preparegeometrychange first</li>
<li>Situations where Qt auto-deletes objects, leaving the python wrapper alive.</li>
</ul>
<dl class="docutils">
<dt>(make sure you keep references to the objects you want to stay alive, and remove bad references before they cause trouble)</dt>
<dd><ul class="first last simple">
<li>joined widgets such as a scrollarea and its scroll bars. When the scrollarea is deleted, the scrollbars go as well, but any references to the scrollbars are NOT informed of this, so accessing those objects causes crash (Pyside does not have this problem)</li>
<li>parents auto-deleting children, tree items deleting child widgets when moved</li>
<li>GraphicsItems should NEVER keep a reference to the view they live in. (weakrefs are ok)</li>
</ul>
</dd>
</dl>
<ul class="last">
<li><p class="first">As always, be careful with multi-threading. Never access GUI objects outside the main thread.</p>
</li>
<li><dl class="first docutils">
<dt>If graphicsView seems to be involved, try disabling OpenGL</dt>
<dd><p class="first last">on 2.6+, OpenGL-enabled graphicsviews can crawl to a halt over time.</p>
</dd>
</dl>
</li>
<li><p class="first">using QTimer.singleShot repeatedly can cause lockups</p>
</li>
</ul>
</dd>
<dt>PySide: an alternative to PyQt4</dt>
<dd><ul class="first last simple">
<li>Not mature yet</li>
<li>Developing quickly; may be a viable alternative in the near future..</li>
</ul>
</dd>
<dt>Installing PyQt with debugging symbols:</dt>
<dd><dl class="first last docutils">
<dt>on Linux:</dt>
<dd><p class="first">apt-get install libqt4-dbg python-qt4-dbg python-dbg
gdb python
&gt;&gt;&gt; run acq4.py</p>
<blockquote>
[crash]</blockquote>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">backtrace</span>
</pre></div>
</div>
</dd>
<dt>on Windows:</dt>
<dd><p class="first">Hints: <a class="reference external" href="http://www.gubatron.com/blog/2007/02/23/how-to-build-pyqt4-for-windows/">http://www.gubatron.com/blog/2007/02/23/how-to-build-pyqt4-for-windows/</a>
Download, install Qt SDK
download sip and pyqt source
unzip to a path _with no spaces in the full path <a href="#id5"><span class="problematic" id="id6">name_</span></a>
Use Qt&#8217;s mingw command prompt or VS&#8217;s command prompt (not cmd, powershell, cygwin..)
- If sh is installed via cygwin, it must not be in the PATH during build
- set QTMAKESPEC=win32-g++ (for mingw builds)
- make sure QTDIR is set correctly as well (for me, it is C:QtSDKDesktopQt4.7.3mingw, but this may depend on your build environment.)
- configure sip:</p>
<blockquote>
python configure.py -p win32-g++ &#8211;debug</blockquote>
<ul class="simple">
<li>replace &#8220;python26_d&#8221; with &#8220;python26&#8221; in all Makefiles
(unless you can figure out how to get python26_d)</li>
<li>mingw32-make (or nmake for VS) install  (don&#8217;t use cygwin&#8217;s make)</li>
<li>Now configure without &#8211;debug and rebuild.</li>
<li>repeat for pyqt source</li>
<li>rename all installed <a href="#id1"><span class="problematic" id="id2">*</span></a>_d.pyd files to <a href="#id3"><span class="problematic" id="id4">*</span></a>.pyd (c:python26libsite-packagespyqt4...)</li>
</ul>
<p class="last">Note: this installs .dll and .exe files in the wrong location. (I think DLLS should be in /python26/Lib/site-packages/PyQt4, and EXEs should be in /bin from there)</p>
</dd>
</dl>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Debugging</a><ul>
<li><a class="reference internal" href="#python-debugging-and-ides">Python debugging and IDEs</a></li>
<li><a class="reference internal" href="#memory-leaks">Memory Leaks</a></li>
<li><a class="reference internal" href="#lockups-bus-errors-segmentation-faults">Lockups, bus errors, segmentation faults</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="utilityLibraries/index.html"
                        title="previous chapter">Utility Libraries</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/devGuide/debugging.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="utilityLibraries/index.html" title="Utility Libraries"
             >previous</a> |</li>
        <li><a href="../index.html">ACQ4 v1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >Developer&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Luke Campagnola, Megan B. Kratz.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.1.
    </div>
  </body>
</html>